<div ng-controller='productCtrl'>
    <nav class="navbar navbar-default">
        <ul class="nav navbar-nav">
            <li>
                <a ng-href='/rest/mp/app/merchant/product?shopId={{shopId}}' target='_self'>
                    <span class='glyphicon glyphicon-chevron-left'></span>
                </a>
            </li>
        </ul>
    </nav>
    <div class="form-horizontal">
        <div class='form-group'>
            <label class="col-md-2 control-label">名称</label>
            <div class="col-md-10">
                <input class='form-control' ng-model='editing.name' tms-auto-update tms-wait=1000 tms-update="update('name')">
            </div>
        </div>
        <div class='form-group'>
            <label class="col-md-2 control-label">介绍</label>
            <div class="col-md-10">
                <textarea class='form-control' ng-model='editing.detail_text' tms-auto-update tms-wait=1000 tms-update="update('detail_text')" rows=3></textarea>
            </div>
        </div>
        <div class='form-group' ng-repeat='p in editing.catelog.properties'>
            <label class="col-md-2 control-label" ng-bind='p.name'></label>
            <div class="col-md-10">
                <p class='form-control' ng-bind="editing.propValue2[p.id].name" ng-click='setPropValue(p)'></p>
            </div>
        </div>
        <div class='form-group'>
            <label class="col-md-2 control-label">SKU</label>
            <div class="col-md-10">
                <button class='btn btn-default' ng-click='addSKU()'>
                <span class='glyphicon glyphicon-plus'></span>
                </button>
                <div class='form-group skus' ng-repeat='s in editing.skus' style="margin-left:0">
                    <div class='price form-group' style="margin-left:0">
                        <label>价格（分）</label>
                        <input class='form-control' ng-model='s.price' tms-auto-update tms-wait=1000 tms-update="updateSku(s, 'price')">
                    </div>
                    <div class='quantity form-group' style="margin-left:0">
                        <label>数量</label>
                        <input class='form-control' ng-model='s.quantity' tms-auto-update tms-wait=1000 tms-update="updateSku(s, 'quantity')">
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script type="text/ng-template" id="propValueSetter.html">
        <div class="modal-header">
            <button class="close" type="button" ng-click="close()">×</button>
            <h5 class="modal-title">设置属性</h5>
        </div>
        <div class="modal-body">
            <form class="form-horizontal">
                <div class="form-group">
                    <label class="col-md-2 control-label">{{prop.name}}</label>
                    <div class="col-md-10">
                        <input type='text' class="form-control" ng-model="data.name"/>
                       <select class="form-control" size="5" ng-model="data.name" ng-options="v.name as v.name for v in options">
                            <option value="">空</option>
                       </select>
                    </div>
                </div>
            </form>
        </div>
        <div class="modal-footer">
            <button class="btn btn-success" ng-disabled="!data.name" ng-click="ok()">确定</button>
        </div>
    </script>
</div>