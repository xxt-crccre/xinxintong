<div id='catelog-view'>
    <div class='form-group'>
        <label>分类名称</label>
        <input class='form-control' ng-model='editing.name' tms-auto-update tms-wait=1000 tms-update="update('name')">
    </div>
    <div class='form-group'>
        <label>商品类型</label>
        <select class='form-control' ng-model='editing.pattern' ng-change="update('pattern')">
            <option value='basic'>实物</option>
            <option value='place'>场所</option>
            <option value='service'>服务</option>
        </select>
    </div>
    <div class='form-group'>
        <label>需要有效期</label>
        <select class='form-control' ng-model='editing.has_validity' ng-change="update('has_validity')">
            <option value='N'>否</option>
            <option value='Y'>是</option>
        </select>
    </div>
    <div class='form-group'>
        <div>
            <label>商品属性</label>
            <button class='btn btn-default btn-xs' ng-click="addProp()">
            <span class='glyphicon glyphicon-plus'></span>
            </button>
        </div>
        <ul class='list-group'>
            <li class='list-group-item' ng-repeat='p in editing.properties'>
                <span ng-bind='p.name'></span>
                <button class='btn btn-default btn-xs pull-right' ng-click="editProp(p, $index)">
                <span class='glyphicon glyphicon-edit'></span>
                </button>
            </li>
        </ul>
        <p class='help-block'>定义除商品名称、介绍外的其他扩展信息</p>
    </div>
    <div class='form-group'>
        <div>
            <label>订单属性</label>
            <button class='btn btn-default btn-xs' ng-click="addOrderProp()">
            <span class='glyphicon glyphicon-plus'></span>
            </button>
        </div>
        <ul class='list-group'>
            <li class='list-group-item' ng-repeat='p in editing.orderProperties'>
                <span ng-bind='p.name'></span>
                <button class='btn btn-default btn-xs pull-right' ng-click="editOrderProp(p, $index)">
                <span class='glyphicon glyphicon-edit'></span>
                </button>
            </li>
        </ul>
        <p class='help-block'>定义提交订单时需用户填写的信息</p>
    </div>
    <div class='form-group'>
        <div>
            <label>订单反馈属性</label>
            <button class='btn btn-default btn-xs' ng-click="addFeedbackProp()">
            <span class='glyphicon glyphicon-plus'></span>
            </button>
        </div>
        <ul class='list-group'>
            <li class='list-group-item' ng-repeat='p in editing.feedbackProperties'>
                <span ng-bind='p.name'></span>
                <button class='btn btn-default btn-xs pull-right' ng-click="editFeedbackProp(p, $index)">
                <span class='glyphicon glyphicon-edit'></span>
                </button>
            </li>
        </ul>
        <p class='help-block'>定义确认订单时需客服填写的信息</p>
    </div>
    <button class='btn btn-danger' ng-click='remove()'>删除</button>
    <button class='btn btn-success' ng-show="editing.active==='N'"  ng-click='activate()'>上线</button>
    <button class='btn btn-success' ng-show="editing.active==='Y'" ng-click='deactivate()'>下线</button>
    <script type="text/ng-template" id="propEditor.html">
    <div class="modal-header">
        <button class="close" type="button" ng-click="close()">×</button>
        <h5 class="modal-title">编辑属性</h5>
    </div>
    <div class="modal-body">
        <form class="form-horizontal">
            <div class="form-group">
                <label class="col-md-2 control-label">ID</label>
                <div class="col-md-10">
                    <p class='form-control-static' ng-bind='prop.id'></p>
                </div>
            </div>
            <div class="form-group">
                <label class="col-md-2 control-label">名称</label>
                <div class="col-md-10">
                    <input type='text' class='form-control' ng-model='prop.name'>
                </div>
            </div>
        </form>
    </div>
    <div class="modal-footer">
        <button class="btn btn-danger" ng-click="remove()">删除</button>
        <button class="btn btn-success" ng-click="ok()">保存</button>
    </div>
    </script>
</div>