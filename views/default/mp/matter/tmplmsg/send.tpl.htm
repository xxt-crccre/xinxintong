<div ng-controller='sendCtrl'>
    <div class='col-md-4' style='padding-left:0'>
        <div class='form-group'>
            <ul class='list-group'>
                <li class='list-group-item' ng-repeat="us in userSet" ng-mouseenter='enter=true' ng-mouseleave='enter=false'>
                <button class="btn btn-default btn-xs pull-right" ng-click="removeUserSet(us, $index)"><span class="glyphicon glyphicon-remove"></span></button>
                <span>{{us.label||us.identity}}</span>
            </ul>
            <button class='btn btn-success' ng-click='startUserPicker()'>选择用户</button>
        </div>
    </div>
    <div class='col-md-8' style='padding-right:0'>
        <div class='form-group' ng-repeat='p in editing.params'>
            <input class='form-control' placeholder='{{p.pname}}' ng-model="data[p.pname]">
            <p class='form-static'>{{p.pname}} {{p.plabel}}</p>
        </div>
        <div class='form-group'>
            <input class='form-control' placeholder='URL' ng-model="url">
        </div>
        <div class='form-group'>
            <button class='btn btn-default' ng-click='startMatterPicker()'>选择素材</button>
            <a class='list-group-item' ng-if='matter'><span>{{matter.title}}</span><button class='btn btn-default btn-xs pull-right' ng-click='removeMatter()'><span class='glyphicon glyphicon-remove'></span></button></a>
        </div>
    </div>
    <button class='btn btn-success pull-right' ng-click='send()'>发送</button>
    <script type="text/ng-template" id='userPicker.html'>
        <div class="modal-header">
            <div class='form-inline'>
                <button class="close" type="button" ng-click="cancel()">×</button>
                <div class='form-group' style='width:100px'>
                    <p class="modal-title h5 form-control-static">选择用户</p>
                </div>
            </div>
        </div>
        <div class="modal-body">
            <userpicker user-set='userSet'/> 
        </div>
        <div class="modal-footer">
            <button class="btn btn-warning" ng-click="ok()">确定</button>
        </div>
    </script>
    <div mattersgallery style='display:none' single-matter='true' matter-url='/rest/mp/matter' matter-types='matterTypes'></div>
</div>
